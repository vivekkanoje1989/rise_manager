function encodeAjaxPostData(a){return a=replaceAll("=","~",a),a=replaceAll("&","^",a)}function replaceAll(a,b,c){return c.replace(new RegExp(a,"g"),b)}$(document).ready(function(){$.ajaxSetup({cache:!1}),moment.locale(AppLanugage.locale),function(a){a.fn.datepicker.dates.custom={days:AppLanugage.days,daysShort:AppLanugage.daysShort,daysMin:AppLanugage.daysMin,months:AppLanugage.months,monthsShort:AppLanugage.monthsShort,today:AppLanugage.today}}(jQuery),$("body").on("click","[data-act=ajax-modal]",function(){var a={ajaxModal:1},b=$(this).attr("data-action-url"),c=$(this).attr("data-modal-lg"),d=$(this).attr("data-title");return b?(d?$("#ajaxModalTitle").html(d):$("#ajaxModalTitle").html($("#ajaxModalTitle").attr("data-title")),$("#ajaxModalContent").html($("#ajaxModalOriginalContent").html()),$("#ajaxModalContent").find(".original-modal-body").removeClass("original-modal-body").addClass("modal-body"),$("#ajaxModal").modal("show"),$(this).each(function(){$.each(this.attributes,function(){if(this.specified&&this.name.match("^data-post-")){var b=this.name.replace("data-post-","");a[b]=this.value}})}),ajaxModalXhr=$.ajax({url:b,data:a,cache:!1,type:"POST",success:function(a){$("#ajaxModal").find(".modal-dialog").removeClass("mini-modal"),"1"===c&&$("#ajaxModal").find(".modal-dialog").addClass("modal-lg"),$("#ajaxModalContent").html(a);var b=$("#ajaxModalContent").find(".modal-body"),d=b.height(),e=$(window).height()-200;d>e&&(d=e,$.fn.mCustomScrollbar&&b.mCustomScrollbar({setHeight:d,theme:"minimal-dark",autoExpandScrollbar:!0}))},statusCode:{404:function(){$("#ajaxModalContent").find(".modal-body").html(""),appAlert.error("404: Page not found.",{container:".modal-body",animate:!1})}},error:function(){$("#ajaxModalContent").find(".modal-body").html(""),appAlert.error("500: Internal Server Error.",{container:".modal-body",animate:!1})}}),!1):(console.log("Ajax Modal: Set data-action-url!"),!1)}),$("#ajaxModal").on("hidden.bs.modal",function(a){ajaxModalXhr.abort(),$("#ajaxModal").find(".modal-dialog").removeClass("modal-lg"),$("#ajaxModal").find(".modal-dialog").addClass("mini-modal"),$("#ajaxModalContent").html("")}),$("body").on("click","[data-act=ajax-request]",function(){var a={},b=$(this),c=b.attr("data-action-url"),d=b.attr("data-remove-on-success"),e=b.attr("data-remove-on-click"),f=b.attr("data-fade-out-on-success"),g=b.attr("data-fade-out-on-click"),h=b.attr("data-inline-loader"),i=b.attr("data-reload-on-success"),j="";return b.attr("data-real-target")?j=$(b.attr("data-real-target")):b.attr("data-closest-target")&&(j=b.closest(b.attr("data-closest-target"))),c?(e&&$(e).length&&$(e).remove(),g&&$(g).length&&$(g).fadeOut(function(){$(this).remove()}),b.each(function(){$.each(this.attributes,function(){if(this.specified&&this.name.match("^data-post-")){var b=this.name.replace("data-post-","");a[b]=this.value}})}),"1"===h?b.addClass("inline-loader"):appLoader.show(),void(ajaxRequestXhr=$.ajax({url:c,data:a,cache:!1,type:"POST",success:function(a){i&&location.reload(),d&&$(d).length&&$(d).remove(),f&&$(f).length&&$(f).fadeOut(function(){$(this).remove()}),appLoader.hide(),j.length&&j.html(a)},statusCode:{404:function(){appLoader.hide(),appAlert.error("404: Page not found.")}},error:function(){appLoader.hide(),appAlert.error("500: Internal Server Error.")}}))):(console.log("Ajax Request: Set data-action-url!"),!1)}),$("body").on("click",'[data-toggle="ajax-tab"] a',function(){var a=$(this),b=a.attr("href"),c=a.attr("data-target");return!!c&&(""===$(c).html()&&(appLoader.show({container:c,css:"right:50%; bottom:auto;"}),$.get(b,function(a){$(c).html(a)})),a.tab("show"),!1)}),$('[data-toggle="ajax-tab"] a').first().trigger("click"),$("body").on("click",'[data-toggle="app-modal"]',function(){var a=!0;return"0"===$(this).attr("data-sidebar")&&(a=!1),appContentModal.init({url:$(this).attr("data-url"),sidebar:a}),!1})}),function(a){a.fn.appForm=function(b){function e(b,c){a.validator.addMethod("greaterThanOrEqual",function(b,c,d){var e=d;return!d||0!==d.indexOf("#")&&0!==d.indexOf(".")||(e=a(d).val()),/Invalid|NaN/.test(new Date(b))?isNaN(b)&&isNaN(e)||Number(b)>=Number(e):new Date(b)>=new Date(e)},"Must be greater than {0}."),a(b).validate({submitHandler:function(a){return!c||void c(a)},highlight:function(b){a(b).closest(".form-group").addClass("has-error")},unhighlight:function(b){a(b).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",ignore:":hidden:not(.validate-hidden)",errorPlacement:function(a,b){b.parent(".input-group").length?a.insertAfter(b.parent()):a.insertAfter(b)}}),a(".validate-hidden").click(function(){a(this).closest(".form-group").removeClass("has-error").find(".help-block").hide()})}function f(b){var c=b.height()-80;c>0&&(c=Math.floor(c/2)),b.append("<div class='modal-mask'><div class='circle-loader'></div></div>");var d=b.outerHeight();a(".modal-mask").css({width:b.width()+30+"px",height:d+"px","padding-top":c+"px"}),b.closest(".modal-dialog").find('[type="submit"]').attr("disabled","disabled")}function g(){var b=a(".modal-body");b.closest(".modal-dialog").find('[type="submit"]').removeAttr("disabled"),a(".modal-mask").remove()}function h(b){b&&(a(".modal-mask").html("<div class='circle-done'><i class='fa fa-check'></i></div>"),setTimeout(function(){a(".modal-mask").find(".circle-done").addClass("ok")},30)),setTimeout(function(){a(".modal-mask").remove(),a("#ajaxModal").modal("toggle"),d.onModalClose()},1e3)}var c={ajaxSubmit:!0,isModal:!0,dataType:"json",onModalClose:function(){},onSuccess:function(){},onError:function(){return!0},onSubmit:function(){},onAjaxSuccess:function(){},beforeAjaxSubmit:function(a,b,c){}},d=a.extend({},c,b);this.each(function(){d.ajaxSubmit?e(a(this),function(b){d.onSubmit(),d.isModal&&f(a("#ajaxModalContent").find(".modal-body")),a(b).ajaxSubmit({dataType:d.dataType,beforeSubmit:function(a,b,c){d.beforeAjaxSubmit(a,b,c)},success:function(a){d.onAjaxSuccess(a),a.success?(d.onSuccess(a),d.isModal&&h(!0)):d.onError(a)&&(d.isModal?(g(),a.message&&appAlert.error(a.message,{container:".modal-body",animate:!1})):a.message&&appAlert.error(a.message))}})}):e(a(this))})}}(jQuery),"undefined"!=typeof TableTools&&(TableTools.DEFAULTS.sSwfPath=AppHelper.assetsDirectory+"js/datatable/TableTools/swf/copy_csv_xls_pdf.swf"),function(a){a.fn.appTable=function(b){var c=1*AppHelper.settings.displayLength;!isNaN(c)&&c||(c=10);var d={source:"",xlsColumns:[],pdfColumns:[],printColumns:[],columns:[],order:[[0,"asc"]],hideTools:!1,displayLength:c,dateRangeType:"",checkBoxes:[],radioButtons:[],filterDropdown:[],singleDatepicker:[],rangeDatepicker:[],stateSave:!0,stateDuration:2592e3,filterParams:{datatable:!0},onDeleteSuccess:function(){},onUndoSuccess:function(){},onInitComplete:function(){},customLanguage:{noRecordFoundText:AppLanugage.noRecordFound,searchPlaceholder:AppLanugage.search,printButtonText:AppLanugage.print,excelButtonText:AppLanugage.excel,printButtonToolTip:AppLanugage.printButtonTooltip,today:AppLanugage.today,yesterday:AppLanugage.yesterday,tomorrow:AppLanugage.tomorrow},footerCallback:function(a,b,c,d,e){},rowCallback:function(a,b,c,d){},summation:"",onRelaodCallback:function(){}},e=a(this);if(!e.is("table"))return console.log("Element must have to be a table",this),!1;var f=a.extend({},d,b);if(f.reload){var g=a(this).dataTable(),h=window.InstanceCollection[a(this).selector];return h||(h=f),g.fnReloadAjax(h.filterParams),a(this).data("onRelaodCallback")&&a(this).data("onRelaodCallback")(g,h.filterParams),!1}if(f.newData){var g=a(this).dataTable();if(f.dataId){var i=a(this).find("[data-post-id='"+f.dataId+"']");if(i.length)g.fnDeleteRow(i.closest("tr"));else{var j=a(this).find("[data-index-id='"+f.dataId+"']");j.length&&g.fnDeleteRow(j.closest("tr"))}}return g.fnAddRow(f.newData),!1}f._visible_columns=[],a.each(f.columns,function(a,b){b.visible!==!1&&f._visible_columns.push(a)}),f._exportable=f.xlsColumns.length+f.pdfColumns.length+f.printColumns.length,f._firstDayOfWeek=AppHelper.settings.firstDayOfWeek||0,f._inputDateFormat="YYYY-MM-DD";var k=function(a){a||(a=moment().format("YYYY-MM-DD"));var b=moment(a).format("E"),c=b-AppHelper.settings.firstDayOfWeek,d={};return c<7?d.firstDateOfWeek=moment(a).subtract(c,"days").format("YYYY-MM-DD"):d.firstDateOfWeek=moment(a).format("YYYY-MM-DD"),c<0&&(d.firstDateOfWeek=moment(d.firstDateOfWeek).subtract(7,"days").format("YYYY-MM-DD")),d.lastDateOfWeek=moment(d.firstDateOfWeek).add(6,"days").format("YYYY-MM-DD"),d},l=function(){if("daily"===f.dateRangeType)f.filterParams.start_date=moment().format(f._inputDateFormat),f.filterParams.end_date=f.filterParams.start_date;else if("monthly"===f.dateRangeType){var a=moment().daysInMonth(),b=moment().format("YYYY-MM");f.filterParams.start_date=b+"-01",f.filterParams.end_date=b+"-"+a}else if("yearly"===f.dateRangeType){var c=moment().format("YYYY");f.filterParams.start_date=c+"-01-01",f.filterParams.end_date=c+"-12-31"}else if("weekly"===f.dateRangeType){var d=k();f.filterParams.start_date=d.firstDateOfWeek,f.filterParams.end_date=d.lastDateOfWeek}},m=function(){var b=[],c="";a.each(f.checkBoxes,function(a,d){c=d.name,d.isChecked&&b.push(d.value)}),f.filterParams[c]=b},n=function(){a.each(f.radioButtons,function(a,b){b.isChecked&&(f.filterParams[b.name]=b.value)})},o=function(){a.each(f.filterDropdown||[],function(b,c){a.each(c.options,function(a,b){b.isSelected&&(f.filterParams[c.name]=b.id)})})},p=function(){a.each(f.singleDatepicker||[],function(b,c){a.each(c.options||[],function(a,b){b.isSelected&&(f.filterParams[c.name]=b.value)})})},q=function(){a.each(f.rangeDatepicker||[],function(a,b){b.startDate&&b.startDate.value&&(f.filterParams[b.startDate.name]=b.startDate.value),b.startDate&&b.endDate.value&&(f.filterParams[b.endDate.name]=b.endDate.value)})};l(),m(),n(),o(),p(),q();var r={ajax:{url:f.source,type:"POST",data:f.filterParams},sServerMethod:"POST",columns:f.columns,bProcessing:!0,iDisplayLength:f.displayLength,bAutoWidth:!1,bSortClasses:!1,order:f.order,stateSave:f.stateSave,fnStateLoadParams:function(a,b){b&&b.search&&(b.search.search="")},stateDuration:f.stateDuration,fnInitComplete:function(){f.onInitComplete(this)},language:{lengthMenu:"_MENU_",zeroRecords:f.customLanguage.noRecordFoundText,info:"_START_-_END_ / _TOTAL_",sInfo:"_START_-_END_ / _TOTAL_",infoFiltered:"(_MAX_)",search:"",searchPlaceholder:f.customLanguage.searchPlaceholder,sInfoEmpty:"0-0 / 0",sInfoFiltered:"(_MAX_)",sInfoPostFix:"",sInfoThousands:",",sProcessing:"<div class='table-loader'><span class='loading'></span></div>",oPaginate:{sPrevious:"<i class='fa fa-angle-double-left'></i>",sNext:"<i class='fa fa-angle-double-right'></i>"}},sDom:"",footerCallback:function(b,c,d,e,g){var h=this;if(f.summation){var i=h.api().page.info();if(!i.recordsTotal)return a(h).find("tfoot").hide(),!1;a(h).find("tfoot").show(),a.each(f.summation,function(b,c){var d=calculateDatatableTotal(h,c.column,function(a){return"currency"===c.dataType?unformatCurrency(a):"time"===c.dataType?moment.duration(a).asSeconds():"number"===c.dataType?unformatCurrency(a):a},!0);if("currency"===c.dataType?d=toCurrency(d,c.currencySymbol):"time"===c.dataType?d=secondsToTimeFormat(d):"number"===c.dataType&&(d=toCurrency(d,"none")),a(h).find("[data-current-page="+c.column+"]").html(d),i.pages>1){a(h).find("[data-section='all_pages']").show();var e=calculateDatatableTotal(h,c.column,function(a){return"currency"===c.dataType?unformatCurrency(a):"time"===c.dataType?moment.duration(a).asSeconds():"number"===c.dataType?unformatCurrency(a):a});"currency"===c.dataType?e=toCurrency(e,c.currencySymbol):"time"===c.dataType?e=secondsToTimeFormat(e):"number"===c.dataType&&(e=toCurrency(e,"none")),a(h).find("[data-all-page="+c.column+"]").html(e)}else a(h).find("[data-section='all_pages']").hide()})}f.footerCallback(b,c,d,e,g,h)},fnRowCallback:function(a,b,c,d){f.rowCallback(a,b,c,d)}};if(f.hideTools||(r.sDom="<'datatable-tools'<'col-md-1'l><'col-md-11 custom-toolbar'f>r>t<'datatable-tools clearfix'<'col-md-3'i><'col-md-9'p>>"),f._exportable){var s=[];if(f.xlsColumns.length&&s.push({sExtends:"xls",sButtonText:f.customLanguage.excelButtonText,mColumns:f.xlsColumns}),f.pdfColumns.length&&s.push({sExtends:"pdf",mColumns:f.pdfColumns}),f.printColumns.length){var t=function(a,b){return a.filter(function(a){return b.indexOf(a)<0})};f._hiddenColumns=t(f._visible_columns,f.printColumns),s.push({sExtends:"print",sButtonText:f.customLanguage.printButtonText,sToolTip:f.customLanguage.printButtonToolTip,sInfo:"",fnClick:function(b,c){for(var d in f._hiddenColumns)u.fnSetColumnVis(f._hiddenColumns[d],!1);a("html").addClass("print-peview"),a(".scrollable-page").addClass("print-peview"),this.fnPrint(!0,c),a(window).keydown(function(b){if(27===b.which){for(var c in f._hiddenColumns)u.fnSetColumnVis(f._hiddenColumns[c],!0);a(".print-peview").removeClass("print-peview"),setPageScrollable(),a(".dataTables_processing").hide()}})}})}f.hideTools||(r.sDom="<'datatable-tools'<'col-md-1'l><'col-md-11 custom-toolbar'f<'datatable-export'T>>r>t<'datatable-tools clearfix'<'col-md-3'i><'col-md-9'p>>"),r.oTableTools={aButtons:s}}var u=e.dataTable(r),v=e.closest(".dataTables_wrapper");if(v.find(".DTTT_button_print").tooltip({placement:"bottom",container:"body"}),v.find("select").select2({minimumResultsForSearch:-1}),e.data("onRelaodCallback",f.onRelaodCallback),f.dateRangeType){var w='<div class="mr15 DTTT_container"><button data-act="prev" class="btn btn-default date-range-selector"><i class="fa fa-chevron-left"></i></button><button data-act="datepicker" class="btn btn-default" style="margin: -1px"></button><button data-act="next"  class="btn btn-default date-range-selector"><i class="fa fa-chevron-right"></i></button></div>';v.find(".custom-toolbar").append(w);var x=v.find("[data-act='datepicker']"),y=v.find(".date-range-selector");if("daily"===f.dateRangeType){var z=function(a){f.filterParams.start_date===moment().format(f._inputDateFormat)?a.html(f.customLanguage.today):f.filterParams.start_date===moment().subtract(1,"days").format(f._inputDateFormat)?a.html(f.customLanguage.yesterday):f.filterParams.start_date===moment().add(1,"days").format(f._inputDateFormat)?a.html(f.customLanguage.tomorrow):a.html(moment(f.filterParams.start_date).format("Do, MMMM YYYY"))};l(),z(x),x.datepicker({format:f._inputDateFormat,autoclose:!0,todayHighlight:!0,language:"custom"}).on("changeDate",function(a){var b=moment(a.date).format(f._inputDateFormat);f.filterParams.start_date=b,f.filterParams.end_date=b,z(x),e.appTable({reload:!0,filterParams:f.filterParams})}),y.click(function(){var b=a(this).attr("data-act"),c="";"next"===b?c=moment(f.filterParams.start_date).add(1,"days").format(f._inputDateFormat):"prev"===b&&(c=moment(f.filterParams.start_date).subtract(1,"days").format(f._inputDateFormat)),f.filterParams.start_date=c,f.filterParams.end_date=c,z(x),e.appTable({reload:!0,filterParams:f.filterParams})})}if("monthly"===f.dateRangeType){var A=function(a){a.html(moment(f.filterParams.start_date).format("MMMM YYYY"))};l(),A(x),x.datepicker({format:"YYYY-MM",viewMode:"months",minViewMode:"months",autoclose:!0,language:"custom"}).on("changeDate",function(a){var b=moment(a.date).format(f._inputDateFormat),c=moment(b).daysInMonth(),d=moment(b).format("YYYY-MM");f.filterParams.start_date=d+"-01",f.filterParams.end_date=d+"-"+c,A(x),e.appTable({reload:!0,filterParams:f.filterParams})}),y.click(function(){var b=a(this).attr("data-act"),c=moment(f.filterParams.start_date),d=moment(f.filterParams.end_date);if("next"===b){var g=c.add(1,"months"),h=g.daysInMonth(),i=g.format("YYYY-MM");c=i+"-01",d=i+"-"+h}else if("prev"===b){var j=c.subtract(1,"months"),h=j.daysInMonth(),i=j.format("YYYY-MM");c=i+"-01",d=i+"-"+h}f.filterParams.start_date=c,f.filterParams.end_date=d,A(x),e.appTable({reload:!0,filterParams:f.filterParams})})}if("yearly"===f.dateRangeType){var B=function(a){a.html(moment(f.filterParams.start_date).format("YYYY"))};l(),B(x),x.datepicker({format:"YYYY-MM",viewMode:"years",minViewMode:"years",autoclose:!0,language:"custom"}).on("changeDate",function(a){var b=moment(a.date).format(f._inputDateFormat),c=moment(b).format("YYYY");f.filterParams.start_date=c+"-01-01",f.filterParams.end_date=c+"-12-31",B(x),e.appTable({reload:!0,filterParams:f.filterParams})}),y.click(function(){var b=a(this).attr("data-act"),c=moment(f.filterParams.start_date),d=moment(f.filterParams.end_date);"next"===b?(c=c.add(1,"years").format(f._inputDateFormat),d=d.add(1,"years").format(f._inputDateFormat)):"prev"===b&&(c=c.subtract(1,"years").format(f._inputDateFormat),d=d.subtract(1,"years").format(f._inputDateFormat)),f.filterParams.start_date=c,f.filterParams.end_date=d,B(x),e.appTable({reload:!0,filterParams:f.filterParams})})}if("weekly"===f.dateRangeType){var C=function(a){var b=moment(f.filterParams.start_date).format("Do MMM"),c=moment(f.filterParams.end_date).format("Do MMM, YYYY");x.datepicker({format:"YYYY-MM-DD",autoclose:!0,calendarWeeks:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek}),a.html(b+" - "+c)};l(),C(x),y.click(function(){var b=a(this).attr("data-act"),c=moment(f.filterParams.start_date),d=moment(f.filterParams.end_date);"next"===b?(c=c.add(7,"days").format(f._inputDateFormat),d=d.add(7,"days").format(f._inputDateFormat)):"prev"===b&&(c=c.subtract(7,"days").format(f._inputDateFormat),d=d.subtract(7,"days").format(f._inputDateFormat)),f.filterParams.start_date=c,f.filterParams.end_date=d,C(x),e.appTable({reload:!0,filterParams:f.filterParams})}),x.datepicker({format:f._inputDateFormat,autoclose:!0,calendarWeeks:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek}).on("show",function(){a(".datepicker").addClass("week-view"),a(".datepicker-days").find(".active").siblings(".day").addClass("active")}).on("changeDate",function(a){var b=k(a.date);f.filterParams.start_date=b.firstDateOfWeek,f.filterParams.end_date=b.lastDateOfWeek,C(x),e.appTable({reload:!0,filterParams:f.filterParams})})}}if("undefined"!=typeof f.checkBoxes[0]){var D="",E=[],F="";a.each(f.checkBoxes,function(a,b){var c="",d="";F=b.name,b.isChecked&&(c=" checked",d=" active",E.push(b.value)),D+='<label class="btn btn-default '+d+'">',D+='<input type="checkbox" name="'+b.name+'" value="'+b.value+'" autocomplete="off" '+c+">"+b.text,D+="</label>"}),f.filterParams[F]=E;var G='<div class="mr15 DTTT_container"><div class="btn-group filter" data-act="checkbox" data-toggle="buttons">'+D+"</div></div>";v.find(".custom-toolbar").append(G);var H=v.find("[data-act='checkbox']");H.click(function(){var b=a(this);setTimeout(function(){var c=[],d="";b.parent().find("input:checkbox").each(function(){d=a(this).attr("name"),a(this).is(":checked")&&c.push(a(this).val())}),f.filterParams[d]=c,e.appTable({reload:!0,filterParams:f.filterParams})})})}if("undefined"!=typeof f.radioButtons[0]){var I="";a.each(f.radioButtons,function(a,b){var c="",d="";b.isChecked&&(c=" checked",d=" active",f.filterParams[b.name]=b.value),I+='<label class="btn btn-default '+d+'">',I+='<input type="radio" name="'+b.name+'" value="'+b.value+'" autocomplete="off" '+c+">"+b.text,I+="</label>"});var J='<div class="mr15 DTTT_container"><div class="btn-group filter" data-act="radio" data-toggle="buttons">'+I+"</div></div>";v.find(".custom-toolbar").append(J);var K=v.find("[data-act='radio']");K.click(function(){var b=a(this);setTimeout(function(){b.parent().find("input:radio").each(function(){a(this).is(":checked")&&(f.filterParams[a(this).attr("name")]=a(this).val())}),e.appTable({reload:!0,filterParams:f.filterParams})})})}if("undefined"!=typeof f.singleDatepicker[0]&&a.each(f.singleDatepicker,function(b,c){var d=" ",g="",h="";c.options||(c.options=[]),c.options.push({value:"show-date-picker",text:AppLanugage.custom}),a.each(c.options,function(a,b){var c="";b.isSelected&&(c="active",g=b.value,h=b.text),d+='<div class="list-group-item '+c+'" data-value="'+b.value+'">'+b.text+"</div>"}),h||(h="- "+c.defaultText+" -",d='<div class="list-group-item active" data-value="">'+h+"</div>"+d),c.name&&(f.filterParams[c.name]=g);var i=function(a){f.filterParams[c.name]=a,e.appTable({reload:!0,filterParams:f.filterParams})},j=function(a){return a+"<i class='ml10 fa fa-caret-down text-off'></i>"},k='<div class="datepicker-custom-list list-group mb0">'+d+"</div>",l='<div class="mr15 DTTT_container"><button name="'+c.name+'" class="btn datepicker-custom-selector">'+j(h)+"</button></div>";v.find(".custom-toolbar").append(l);var m=v.find("[name='"+c.name+"']"),n="undefined"!=typeof c.options[1];m.datepicker({format:f._inputDateFormat,autoclose:!0,todayHighlight:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek,orientation:"bottom"}).on("show",function(){n&&(a(".datepicker-days, .datepicker-months, .datepicker-years, .datepicker-decades, .table-condensed").hide(),a(".datepicker-custom-list").show(),a(".datepicker-custom-list").length||(a(".datepicker").append(k),a(".datepicker .list-group-item").click(function(){a(".datepicker .list-group-item").removeClass("active"),a(this).addClass("active");var b=a(this).attr("data-value");"show-date-picker"===b?(a(".datepicker-custom-list, .datepicker-months, .datepicker-years, .datepicker-decades, .table-condensed").hide(),a(".datepicker-days, .table-condensed").show()):(a(".datepicker").hide(),moment(b,f._inputDateFormat).isValid()&&(b=moment(b,f._inputDateFormat).format(f._inputDateFormat)),m.html(j(a(this).html())),i(b))})))}).on("changeDate",function(a){m.html(j(moment(a.date,f._inputDateFormat).format("Do, MMMM YYYY"))),i(moment(a.date,f._inputDateFormat).format(f._inputDateFormat))})}),"undefined"!=typeof f.rangeDatepicker[0]&&a.each(f.rangeDatepicker,function(b,c){var d=c.startDate||{},g=c.endDate||{},h=!!c.showClearButton,i='<i class="fa fa-calendar"></i>',j=d.value?moment(d.value,f._inputDateFormat).format("Do, MMMM YYYY"):i,k=g.value?moment(g.value,f._inputDateFormat).format("Do, MMMM YYYY"):i;f.filterParams[d.name]=d.value,f.filterParams[g.name]=g.value;var l=function(a,b){f.filterParams[a]=b,e.appTable({reload:!0,filterParams:f.filterParams})},m='<div class="mr15 DTTT_container"><div class="input-daterange input-group"><button class="btn btn-default form-control" name="'+d.name+'" data-date="'+d.value+'">'+j+'</button><span class="input-group-addon">-</span><button class="btn btn-default form-control" name="'+g.name+'" data-date="'+g.value+'">'+k+"</div></div>";v.find(".custom-toolbar").append(m);var n=v.find(".input-daterange"),o=n.find("button").toArray();n.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek,orientation:"bottom",inputs:o}).on("changeDate",function(b){var c=moment(b.date,f._inputDateFormat).format(f._inputDateFormat);f.filterParams[d.name]||(f.filterParams[d.name]=c),f.filterParams[g.name]||(f.filterParams[g.name]=c),l(a(b.target).attr("name"),c),a(o[0]).html(moment(f.filterParams[d.name],f._inputDateFormat).format("Do, MMMM YYYY")),a(o[1]).html(moment(f.filterParams[g.name],f._inputDateFormat).format("Do, MMMM YYYY"))}).on("show",function(){h&&(a(".datepicker-clear-selection").show(),a(".datepicker-clear-selection").length||(a(".datepicker").append("<div class='datepicker-clear-selection p5 clickable text-center'>"+AppLanugage.clear+"</div>"),a(".datepicker .datepicker-clear-selection").click(function(){f.filterParams[d.name]="",l(g.name,""),a(o[0]).html(i),a(o[1]).html(i),a(".datepicker").hide()})))})}),"undefined"!=typeof f.filterDropdown[0]){var I="";a.each(f.filterDropdown,function(b,c){var d="",g="";a.each(c.options,function(a,b){var c="";b.isSelected&&(c="selected",g=b.id),d+="<option "+c+' value="'+b.id+'">'+b.text+"</option>"}),c.name&&(f.filterParams[c.name]=g);var h='<div class="mr15 DTTT_container"><select class="'+c.class+'" name="'+c.name+'">'+d+"</select></div>";v.find(".custom-toolbar").append(h);var i=v.find("[name='"+c.name+"']");void 0!==window.Select2&&i.select2(),i.change(function(){var b=a(this);f.filterParams[b.attr("name")]=b.val(),e.appTable({reload:!0,filterParams:f.filterParams})})})}var L=function(b){a('<a class="undo-delete" href="javascript:;"><strong>Undo</strong></a>').insertAfter(a(b.alertSelector).find(".app-alert-message")),a(b.alertSelector).find(".undo-delete").bind("click",function(){a(b.alertSelector).remove(),appLoader.show(),a.ajax({url:b.url,type:"POST",dataType:"json",data:{id:b.id,undo:!0},success:function(a){appLoader.hide(),a.success&&(e.appTable({newData:a.data}),f.onUndoSuccess(a))}})})},M=function(b){appLoader.show();var c=a(b.currentTarget);b.data&&b.data.target&&(c=b.data.target);var d=c.attr("data-action-url"),g=c.attr("data-id"),h=c.attr("data-undo");a.ajax({url:d,type:"POST",dataType:"json",data:{id:g},success:function(a){if(a.success){var b=c.closest("tr"),i=e.DataTable();u.fnDeleteRow(i.row(b).index());var j=appAlert.warning(a.message,{duration:2e4});f.onDeleteSuccess(a),"0"!==h&&L({alertSelector:j,url:d,id:g})}else appAlert.error(a.message);appLoader.hide()}})},N=function(b){var c=a("#confirmDeleteButton"),d=a(b.currentTarget);a(this).each(function(){a.each(this.attributes,function(){this.specified&&this.name.match("^data-")&&c.attr(this.name,this.value)})}),d.attr("data-undo","0"),c.unbind("click"),c.on("click",{target:d},M),a("#confirmationModal").modal("show")};window.InstanceCollection=window.InstanceCollection||{},window.InstanceCollection["#"+this.id]=f,a("body").find(e).on("click","[data-action=delete]",M),a("body").find(e).on("click","[data-action=delete-confirmation]",N),a.fn.dataTableExt.oApi.getSettings=function(a){return a},a.fn.dataTableExt.oApi.fnReloadAjax=function(b,c){this.fnClearTable(this),this.oApi._fnProcessingDisplay(b,!0);var d=this;a.ajax({url:b.ajax.url,type:"POST",dataType:"json",data:c,success:function(a){for(var c=0;c<a.data.length;c++)d.oApi._fnAddData(b,a.data[c]);b.aiDisplay=b.aiDisplayMaster.slice(),d.fnDraw(d),d.oApi._fnProcessingDisplay(b,!1)}})},a.fn.dataTableExt.oApi.fnAddRow=function(a,b){this.oApi._fnAddData(a,b),this.fnDraw(this)}}}(jQuery),function(a){a(["jquery"],function(a){return function(){function c(a,b){return this._settings=h(b),this._settings.alertType="info",k(a),"#"+this._settings.alertId}function d(a,b){return this._settings=h(b),this._settings.alertType="success",k(a),"#"+this._settings.alertId}function e(a,b){return this._settings=h(b),this._settings.alertType="warning",k(a),"#"+this._settings.alertId}function f(a,b){return this._settings=h(b),this._settings.alertType="error",k(a),"#"+this._settings.alertId}function g(a){var b="info";return"error"===this._settings.alertType?b="danger":"success"===this._settings.alertType?b="success":"warning"===this._settings.alertType&&(b="warning"),this._settings.animate&&(b+=" animate"),'<div id="'+this._settings.alertId+'" class="app-alert alert alert-'+b+' alert-dismissible " role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="app-alert-message">'+a+'</div><div class="progress"><div class="progress-bar progress-bar-'+b+' hide" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div></div></div>'}function h(c){if(!c)var c={};return c.alertId="app-alert-"+i(),this._settings=a.extend({},b.options,c)}function i(){for(var a="",b="abcdefghijklmnopqrstuvwxyz0123456789",c=0;c<5;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}function j(){this._settings.clearAll&&a("[role='alert']").remove()}function k(b){j();var c=a(this._settings.container);c.length?(this._settings.animate&&setTimeout(function(){a(".app-alert").animate({opacity:1,right:"40px"},500,function(){a(".app-alert").animate({right:"15px"},300)})},20),a(this._settings.container).prepend(g(b)),l()):console.log("appAlert: container must be an html selector!")}function l(){if(this._settings.duration&&this._settings.showProgressBar){var b="#"+this._settings.alertId,c=a(b).find(".progress-bar");c.removeClass("hide").width(0);var d="width "+this._settings.duration+"ms ease";c.css({WebkitTransition:d,MozTransition:d,MsTransition:d,OTransition:d,transition:d}),setTimeout(function(){a(b).length>0&&a(b).remove()},this._settings.duration)}}var b={info:c,success:d,warning:e,error:f,options:{container:"body",duration:0,showProgressBar:!0,clearAll:!0,animate:!0}};return b}()})}(function(a,b){window.appAlert=b(window.jQuery)}),function(a){a(["jquery"],function(a){return function(){function c(b){var c=a("#app-loader");if(this._settings=e(b),!c.length){var d=a(this._settings.container);d.length?d.append('<div id="app-loader" class="app-loader" style="z-index:'+this._settings.zIndex+";"+this._settings.css+'"><div class="loading"></div></div>'):console.log("appLoader: container must be an html selector!")}}function d(){var b=a("#app-loader");b.length&&b.remove()}function e(c){if(!c)var c={};return this._settings=a.extend({},b.options,c)}var b={show:c,hide:d,options:{container:"body",zIndex:"auto",css:""}};return b}()})}(function(a,b){window.appLoader=b(window.jQuery)}),function(a){a(["jquery"],function(a){return function(){function c(a){27===a.keyCode&&e()}function d(a){this._settings=f(a),g(this._settings)}function e(){a(".app-modal").remove(),a(document).unbind("keyup",c),"undefined"!=typeof appModalXhr&&appModalXhr.abort()}function f(b){return b||(b={}),this._settings=a.extend({},appLoader.options,b)}function g(d){var f="<div class='app-modal-sidebar hidden-xs'>                                        <div class='app-modal-close'><span>&times;</span></div>                                        <div class='app-moadl-sidebar-scrollbar'>                                            <div class='app-modal-sidebar-area'>                                            </div>                                        </div>                                    </div>",g="<i class='fa fa-expand expand hidden-xs'></i>";d.sidebar===!1&&(f="",g="<div class='app-modal-close app-modal-fixed-close-button'><span>&times;</span></div>");var h="<div class='app-modal loading'>                                <i class='fa fa-compress compress'></i>                                <div class='app-modal-body'>                                    <div class='app-modal-content'>"+g+"<div class='hide app-modal-close'><span>&times;</span></div>                                        <div class='app-modal-content-area'>                                        </div>                                    </div>"+f+"</div>                            </div>";e(),a("body").prepend(h),a.fn.mCustomScrollbar&&a(".app-moadl-sidebar-scrollbar").mCustomScrollbar({setHeight:a(window).height()-60,theme:"minimal-dark",autoExpandScrollbar:!0}),a(".expand").click(function(){a(".app-modal").addClass("full-content")}),a(".compress").click(function(){a(".app-modal").removeClass("full-content")}),a(".app-modal-close").click(function(){e()}),a(document).bind("keyup",c),appLoader.show({container:".app-modal",css:"top:35%; right:48%;"}),appModalXhr=a.ajax({url:d.url||"",data:{},cache:!1,type:"POST",success:function(b){var c=a(b);a(".app-modal-content-area").html(c.find(".app-modal-content").html()),a(".app-modal-sidebar-area").html(c.find(".app-modal-sidebar").html()),c.remove(),a(".app-modal").removeClass("loading"),appLoader.hide()},statusCode:{404:function(){b.destroy(),appAlert.error("404: Page not found.")}},error:function(){b.destroy(),appAlert.error("500: Internal Server Error.")}})}var b={init:d,destroy:e,options:{url:"",css:"",sidebar:!0}};return b}()})}(function(a,b){window.appContentModal=b(window.jQuery)}),function(a){a.fn.appDateRange=function(b){var c={dateRangeType:"yearly",filterParams:{},onChange:function(a){},onInit:function(a){}},d=a.extend({},c,b);d._inputDateFormat="YYYY-MM-DD",this.each(function(){var b=a(this),c='<div class="ml15"><button data-act="prev" class="btn btn-default date-range-selector"><i class="fa fa-chevron-left"></i></button><button data-act="datepicker" class="btn btn-default" style="margin: -1px"></button><button data-act="next"  class="btn btn-default date-range-selector"><i class="fa fa-chevron-right"></i></button></div>';
b.append(c);var e=b.find("[data-act='datepicker']"),f=b.find(".date-range-selector");if("yearly"===d.dateRangeType){var g=function(a){a.html(moment(d.filterParams.start_date).format("YYYY"))};g(e),e.datepicker({format:"YYYY-MM",viewMode:"years",minViewMode:"years",autoclose:!0,language:"custom"}).on("changeDate",function(a){var b=moment(a.date).format(d._inputDateFormat),c=moment(b).format("YYYY");d.filterParams.start_date=c+"-01-01",d.filterParams.end_date=c+"-12-31",d.filterParams.year=c,g(e),d.onChange(d.filterParams)});var h=moment().format("YYYY");d.filterParams.start_date=h+"-01-01",d.filterParams.end_date=h+"-12-31",d.filterParams.year=h,d.onInit(d.filterParams),f.click(function(){var b=a(this).attr("data-act"),c=moment(d.filterParams.start_date),f=moment(d.filterParams.end_date);"next"===b?(c=c.add(1,"years").format(d._inputDateFormat),f=f.add(1,"years").format(d._inputDateFormat)):"prev"===b&&(c=c.subtract(1,"years").format(d._inputDateFormat),f=f.subtract(1,"years").format(d._inputDateFormat)),d.filterParams.start_date=c,d.filterParams.end_date=f,d.filterParams.year=moment(c).format("YYYY"),g(e),d.onChange(d.filterParams)})}})}}(jQuery),replaceAllString=function(a,b,c){return a.split(b).join(c)},toCurrency=function(a,b){a=parseFloat(a).toFixed(2),b||(b=AppHelper.settings.currencySymbol);var c=a.replace(/(\d)(?=(\d{3})+\.)/g,"$1,");return" "===AppHelper.settings.thousandSeparator&&(c=c.replace(","," ")),","===AppHelper.settings.decimalSeparator&&(c=replaceAllString(c,".","_"),c=replaceAllString(c,",","."),c=replaceAllString(c,"_",",")),"none"===b&&(b=""),"right"===AppHelper.settings.currencyPosition?c+""+b:b+""+c},calculateDatatableTotal=function(a,b,c,d){var e=a.api(),f={};return d&&(f={page:"current"}),e.column(b,f).data().reduce(function(a,b){return c?a+c(b):a+b},0)},unformatCurrency=function(a){return a=a.toString(),a&&(a=a.replace(/[^0-9.,]/g,""),0!=a.indexOf(".")&&0!=a.indexOf(",")||(a=a.slice(1)),","===AppHelper.settings.decimalSeparator?(a=replaceAllString(a,".",""),a=replaceAllString(a,",",".")):a=replaceAllString(a,",",""),a*=1),a?a:0},secondsToTimeFormat=function(a){var b=parseInt(a,10),c=Math.floor(b/3600),d=Math.floor((b-3600*c)/60),e=b-3600*c-60*d;c<10&&(c="0"+c),d<10&&(d="0"+d),e<10&&(e="0"+e);var f=c+":"+d+":"+e;return f},clearAppTableState=function(a){a&&setTimeout(function(){a.api().state.clear()},200)},showHideAppTableColumn=function(a,b,c){a.fnSetColumnVis(b,!!c)};